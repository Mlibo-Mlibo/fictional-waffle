<%- include('partials/header') %>
<div class="events-section">
    <div class="hero mb-5">
        <h1>Community Events</h1>
        <p>Join us for exciting events throughout the year</p>
    </div>

    <div class="container">
        <div class="row g-4">
            <% if (events && events.length > 0) { %>
                <% events.forEach(event => { %>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 shadow-sm hover-effect">
                            <div class="card-img-wrapper">
                                <img src="/images/events/<%= event.image %>" 
                                     class="card-img-top" 
                                     alt="<%= event.title %>"
                                     onerror="this.src='/images/events/Fooddrive.jpg'">
                            </div>
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title"><%= event.title %></h5>
                                <p class="card-text flex-grow-1"><%= event.description %></p>
                                <div class="event-details mb-3">
                                    <p class="card-text mb-2">
                                        <i class="bi bi-calendar-event me-2 text-primary"></i>
                                        <span class="text-muted"><%= event.date %></span>
                                    </p>
                                    <p class="card-text">
                                        <i class="bi bi-geo-alt me-2 text-primary"></i>
                                        <span class="text-muted"><%= event.location %></span>
                                    </p>
                                    <!-- Add event tags -->
                                    <div class="event-tags mt-2">
                                        <span class="badge bg-primary me-1">Community</span>
                                        <% if (event.title.toLowerCase().includes('tech')) { %>
                                            <span class="badge bg-info me-1">Technology</span>
                                        <% } %>
                                        <% if (event.title.toLowerCase().includes('art')) { %>
                                            <span class="badge bg-success me-1">Arts</span>
                                        <% } %>
                                        <% if (event.title.toLowerCase().includes('food')) { %>
                                            <span class="badge bg-warning me-1">Food</span>
                                        <% } %>
                                        <% if (event.title.toLowerCase().includes('sport')) { %>
                                            <span class="badge bg-danger me-1">Sports</span>
                                        <% } %>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mt-auto">
                                    <a href="/events/pdf/<%= event.title.toLowerCase().replace(/ /g, '-') %>.pdf" 
                                       class="btn btn-primary" 
                                       download>
                                        <i class="bi bi-info-circle me-2"></i>Learn More
                                    </a>
                                    <a href="/contact?event=<%= event.title %>" 
                                       class="btn btn-outline-primary">
                                        <i class="bi bi-telephone me-2"></i>Contact
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="col-12 text-center">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle me-2"></i>
                        No events currently scheduled. Please check back later!
                    </div>
                </div>
            <% } %>
        </div>
    </div>
</div>

<style>
.card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: none;
    overflow: hidden;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
}

.card-img-wrapper {
    height: 200px;
    overflow: hidden;
}

.card-img-top {
    height: 100%;
    width: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.card:hover .card-img-top {
    transform: scale(1.05);
}

.event-details {
    border-top: 1px solid rgba(0,0,0,0.1);
    border-bottom: 1px solid rgba(0,0,0,0.1);
    padding: 10px 0;
    margin: 10px 0;
}

.btn {
    border-radius: 20px;
    padding: 8px 16px;
    font-size: 0.9rem;
    transition: all 0.3s ease;
}

.btn:hover {
    transform: translateY(-2px);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Handle PDF download links
    document.querySelectorAll('a[download]').forEach(link => {
        link.addEventListener('click', function(e) {
            if (!confirm('Download event information PDF?')) {
                e.preventDefault();
            }
        });
    });
});
</script>

<%- include('partials/footer') %>